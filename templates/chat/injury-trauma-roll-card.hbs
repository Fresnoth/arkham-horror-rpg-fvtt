<section class="arkham-roll-card arkham-injury-trauma-card" data-roll-category="injury-trauma" data-roll-kind="{{rollKind}}">
  <header class="arkham-roll-header">
    <div class="arkham-roll-heading">
      <span class="arkham-roll-kind {{#if (eq rollKind "injury")}}is-injury{{else}}is-trauma{{/if}}">
        {{#if (eq rollMode "falling")}}
          <i class="fa-solid fa-person-falling arkham-roll-reaction-icon" title="{{localize "ARKHAM_HORROR.Chat.InjuryTrauma.FallingTooltip"}}" aria-hidden="true"></i>
        {{else if (eq rollSource "strain")}}
          <i class="fa-solid fa-hand-fist arkham-roll-reaction-icon" title="{{localize "ARKHAM_HORROR.Chat.InjuryTrauma.StrainTooltip"}}" aria-hidden="true"></i>
        {{/if}}
        {{rollKindLabel}}
      </span>
    </div>

    <div class="arkham-roll-subtitle">
      <span class="arkham-roll-flag is-diff">
        {{numDice}}d{{dieFaces}}
        {{#if modifierApplied}}
          {{#if (gte modifier 0)}}+{{modifier}}{{else}}{{modifier}}{{/if}}
        {{/if}}
      </span>
    </div>
  </header>

  <div class="arkham-roll-banner arkham-injury-trauma-banner">
    {{tableResultName}}
  </div>

  {{#if (eq rollSource "strain")}}
    <div class="arkham-injury-trauma-description">
      <strong>{{localize "ARKHAM_HORROR.ACTIONS.StrainOneself"}}:</strong> {{localize "ARKHAM_HORROR.Chat.InjuryTrauma.StrainNote"}}
    </div>
  {{/if}}

  {{#if (eq rollMode "falling")}}
    <div class="arkham-injury-trauma-description">
      <strong>{{localize "ARKHAM_HORROR.Chat.InjuryTrauma.FallingLabel"}}</strong> — {{localize "ARKHAM_HORROR.Chat.InjuryTrauma.HeightLabel"}}: {{fallingHeightFt}} {{localize "ARKHAM_HORROR.UNITS.Ft"}}
    </div>
  {{/if}}

  {{#if tableResultDescription}}
    <div class="arkham-injury-trauma-description">
      {{{tableResultDescription}}}
    </div>
  {{/if}}

  <details class="arkham-roll-details">
    <summary class="arkham-roll-details-summary">{{localize "ARKHAM_HORROR.Chat.RollResult.RollDetails"}}</summary>
    <div class="arkham-roll-details-body">
      <div class="arkham-roll-meta">
        <div class="arkham-meta-row">
          <span class="arkham-meta-label">{{localize "ARKHAM_HORROR.Chat.InjuryTrauma.Roll"}}</span>
          <span class="arkham-meta-value">{{numDice}}d{{dieFaces}}</span>
        </div>

        {{#if (eq numDice 1)}}
          <div class="arkham-meta-row">
            <span class="arkham-meta-label">{{localize "ARKHAM_HORROR.Chat.InjuryTrauma.Die"}}</span>
            <span class="arkham-meta-value">{{dieResult}}</span>
          </div>
        {{else}}
          <div class="arkham-meta-row">
            <span class="arkham-meta-label">{{localize "ARKHAM_HORROR.Chat.InjuryTrauma.Dice"}}</span>
            <span class="arkham-meta-value">{{dieResultsLabel}}</span>
          </div>
          <div class="arkham-meta-row">
            <span class="arkham-meta-label">{{localize "ARKHAM_HORROR.Chat.InjuryTrauma.DieTotal"}}</span>
            <span class="arkham-meta-value">{{dieTotal}}</span>
          </div>
        {{/if}}

        <div class="arkham-meta-row">
          <span class="arkham-meta-label">{{localize "ARKHAM_HORROR.Chat.InjuryTrauma.Modifier"}}</span>
          <span class="arkham-meta-value">{{#if modifierApplied}}{{modifier}}{{else}}—{{/if}}</span>
        </div>
        <div class="arkham-meta-row">
          <span class="arkham-meta-label">{{localize "ARKHAM_HORROR.Chat.InjuryTrauma.Total"}}</span>
          <span class="arkham-meta-value">{{total}}</span>
        </div>
        <div class="arkham-meta-row">
          <span class="arkham-meta-label">{{localize "ARKHAM_HORROR.Chat.InjuryTrauma.Table"}}</span>
          <span class="arkham-meta-value">{{tableRange}}</span>
        </div>
      </div>
    </div>
  </details>
</section>
